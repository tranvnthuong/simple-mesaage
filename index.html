<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Simple real-time Chatbox</title>
    <style>
        .chat-box,.chat-container,.chat-head,.historyitem,.input-container,.message-headers,.simple-alert,body{display:flex;display:flex}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0;margin:0;overflow:hidden}.chat-container{max-width:350px;width:350px;border:1px solid #ccc;background-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);border-radius:20px;overflow:hidden;flex-direction:column}.chat-head{height:25px;padding:15px;overflow-y:hidden;overflow-x:auto;border-bottom:2px solid #ccc;justify-content:center;align-items:center;background:linear-gradient(to bottom right,#9013fe,#4c5ef5);color:#fff}.chat-head input{position:absolute;height:25px;padding:5px 20px;font-size:16px;font-weight:800;outline:0;color:#fff;background-color:#fff;background:linear-gradient(to bottom right,#9013fe,#4c5ef5);border:1px solid #ccc;border-radius:15px 15px 0 0;display:none}.chat-head input::placeholder{color:#fff;opacity:.7}.chat-head button{color:#fff;background:0 0;outline:0;border:none}.chat-head .listchatBtn{position:absolute;right:8%;padding:10px;font-size:20px;color:#fff;background:0 0;border-radius:60px;outline:0;border:none}.chathistory{position:absolute;margin:310px 10px 0 140px;width:180px;height:240px;background:#f2f2f7;color:#000;border:1px solid #0000C44d;border-radius:20px 0 0 20px;padding:20px;z-index:2;overflow-x:hidden;overflow-y:scroll;transform:translate(300px);transition:.6s}.chathistory h5{position:absolute;top:-20px;left:66px}.historyitem{position:absolute;flex-direction:column}.historyitem span{justify-content:center;border-bottom:1px dashed #0000cc4d;border-top:1px dashed #0000cc4d;margin:3px 0;padding:8px}.historyitem .currentChat{background:linear-gradient(to bottom left,#ffea00,#d0ff00)}.historyitem span:hover{background:linear-gradient(to bottom left,#9013fe,#4c5ef5);color:#fff}.chat-head .newchatbtn{position:absolute;left:8%;padding:10px;font-size:20px;color:#fff;background:0 0;border-radius:60px;outline:0;border:none}.chat-box{flex:1;overflow-y:auto;overflow-x:hidden;min-height:60vh;max-height:60vh;padding:10px;border-bottom:1px solid #ccc;flex-direction:column}.chat-box .boxcontent{align-items:center;justify-content:center}.chat-message{margin:5px 0;padding:10px;border-radius:15px;color:#fff;max-width:75%}.message-headers{justify-content:center;font-style:italic;font-size:10px}.chat-message.left{background-color:#d1d1d1;color:#000;word-wrap:break-word;align-self:flex-start;border-radius:15px 15px 15px 0}.chat-message.right{color:#fff;word-wrap:break-word;background:linear-gradient(to bottom left,#9013fe,#4c5ef5);align-self:flex-end;border-radius:15px 15px 0}.input-container{border-top:1.5px solid #ccc}.input-container input{flex:1;padding:15px;border-radius:10%;border:none;outline:0}.input-container button{padding:10px;border:none;background-color:#4c5ef5;color:#fff;opacity:.9;cursor:pointer}.input-container button:hover{background-color:#4c5ef5;opacity:1}.simple-alert{position:absolute;flex-direction:column;top:0}.simple-alert span{color:#000;padding:8px 30px;background:#f2f2f7;border:1px solid #ccc;border-radius:15px;margin-bottom:5px}
    </style>
</head>

<body>
    <div class="simple-alert">
    </div>
    <div class="chat-container">
        <div class="chat-head">
            <input type="text" id="inputHeader" placeholder="Change the new title" autocomplete="off">
            <h3 id="chatHeader">Simple chatbox</h3>
            <button onclick="let iphd=document.getElementById('inputHeader'); iphd.style.display='block'; iphd.focus();"><i class="fa-regular fa-pen-to-square"></i></button>
            <button class="listchatBtn" id="listchatbtn" onclick="toggleList()"><i class="fa-solid fa-list"></i></button>
            <button class="newchatbtn" id="newchatbtn"><i class="fa-solid fa-circle-plus"></i></button>
            <div class="chathistory" id="chathistory">
                <h5>Lịch sử chat</h5>
                <div class="historyitem" id="historyitem">
                </div>
            </div>
        </div>

        <div class="chat-box" id="chat-box">
            <h4 style="position: absolute; margin: 180px 0 0 110px;">Đoạn chat mới</h4>
        </div>

        <div class="input-container">
            <input type="text" id="message-input" placeholder="Aa" autocomplete="off">
            <button id="sendmsgBtn" onclick="sendMessage()"><i class="fa-regular fa-paper-plane"></i></button>
        </div>
    </div>
    <script>
        var _0x2744a4=_0x3e93;function _0x8cd7(){var _0xb0b231=['message-input','data-chat','-Đã\x20cập\x20nhật\x20tiêu\x20đề\x20(','div','2pfICnj','mytext','none','keyCode','https://paint-flower-danger.glitch.me/messages','setAttribute','?idchat=','#000','getAttribute','color','0123456789','sendmsgBtn','add','POST','setTime','#f2f2f7','Nhập\x20id\x20đoạn\x20chat','sender','translate(300px)','style','cookie','434evTNbW','scrollHeight','random','translate(0)','click','addEventListener','application/json','585024ABMzaX','Id\x20không\x20chứa\x20dấu\x20cách','removeChild','display','newchatbtn','listchatbtn','isDenied','onclick','forEach','3087135kHPqsQ','preventDefault','json','Tạo\x20đoạn\x20chat\x20mới\x20hoặc\x20đi\x20tới\x20đoạn\x20chat\x20với\x20id','match','https://paint-flower-danger.glitch.me/messages?room=','20bojZon','innerText','trim','129960aEqocm','background','search','stringify','createElement','384686FMAAoY','right','Xóa','value','Thao\x20tác\x20này\x20sẽ\x20chỉ\x20xóa\x20đoạn\x20chat\x20hiện\x20tại','title','chatHeader','location','Hãy\x20nhập\x20một\x20id\x20bất\x20kỳ!','text','splice','10065UZnyeS','fire','toUTCString','chathistory','70txJjkB','push','transform','span','split','length','expires=','inputHeader','Đoạn\x20chat:\x20','9JGVicJ','classList','roomId','Độ\x20dài\x20tối\x20đa\x20của\x20id\x20là\x2010','1549896DSeuqH','currentChat','Hủy','11216264IxPqzV','appendChild','parse','idchat','turns','494cNoAsc',';path=/','chatList','then','message-headers','getElementById','gotoChat(this)','historyitem','isConfirmed','warning'];_0x8cd7=function(){return _0xb0b231;};return _0x8cd7();}(function(_0x1d0ef3,_0x37c38d){var _0x4bcfea=_0x3e93,_0x33a176=_0x1d0ef3();while(!![]){try{var _0x38fe69=parseInt(_0x4bcfea(0x207))/0x1*(parseInt(_0x4bcfea(0x1d5))/0x2)+-parseInt(_0x4bcfea(0x1c7))/0x3+-parseInt(_0x4bcfea(0x1be))/0x4*(parseInt(_0x4bcfea(0x1cd))/0x5)+-parseInt(_0x4bcfea(0x1d0))/0x6*(parseInt(_0x4bcfea(0x1b7))/0x7)+-parseInt(_0x4bcfea(0x1f4))/0x8*(parseInt(_0x4bcfea(0x1ed))/0x9)+-parseInt(_0x4bcfea(0x1e4))/0xa*(parseInt(_0x4bcfea(0x1e0))/0xb)+-parseInt(_0x4bcfea(0x1f1))/0xc*(-parseInt(_0x4bcfea(0x1f9))/0xd);if(_0x38fe69===_0x37c38d)break;else _0x33a176['push'](_0x33a176['shift']());}catch(_0x4c1e73){_0x33a176['push'](_0x33a176['shift']());}}}(_0x8cd7,0xe261f));function getCookie(_0xab0ecf){var _0x473922=_0x3e93,_0x43ab29=_0xab0ecf+'=',_0x1a53a6=decodeURIComponent(document[_0x473922(0x1b6)])[_0x473922(0x1e8)](';');for(let _0x24f1a3=0x0;_0x24f1a3<_0x1a53a6['length'];_0x24f1a3++){let _0xec1501=_0x1a53a6[_0x24f1a3];for(;'\x20'==_0xec1501['charAt'](0x0);)_0xec1501=_0xec1501['substring'](0x1);if(0x0==_0xec1501['indexOf'](_0x43ab29))return _0xec1501['substring'](_0x43ab29[_0x473922(0x1e9)],_0xec1501['length']);}return'';}function setCookie(_0x56ad62,_0x585e2f,_0x3d330d){var _0x2247eb=_0x3e93,_0x5daf09=new Date(),_0x3d330d=(_0x5daf09[_0x2247eb(0x1b0)](_0x5daf09['getTime']()+0x18*_0x3d330d*0x3c*0x3c*0x3e8),_0x2247eb(0x1ea)+_0x5daf09[_0x2247eb(0x1e2)]());document['cookie']=_0x56ad62+'='+_0x585e2f+';'+_0x3d330d+_0x2247eb(0x1fa);}function makeid(_0x5c7a1b){var _0x1fffd8=_0x3e93;let _0x3973f3='';var _0x48c45c=_0x1fffd8(0x1ac),_0x43c81f=_0x48c45c[_0x1fffd8(0x1e9)];for(let _0x4870d2=0x0;_0x4870d2<_0x5c7a1b;_0x4870d2++)_0x3973f3+=_0x48c45c['charAt'](Math['floor'](Math[_0x1fffd8(0x1b9)]()*_0x43c81f));return _0x3973f3;}var myMessage=getCookie('mytext'),chatcookie=getCookie('roomId'),changeTurns=0x0;function startFirst(){var _0x2a7e82=_0x3e93;if(myMessage||setCookie(_0x2a7e82(0x208),makeid(0x7),0x1e),chatcookie){var _0x3dd790=getCookie('chatList');if(_0x3dd790){_0x3dd790=JSON['parse'](_0x3dd790);let _0x322b0e=document['getElementById'](_0x2a7e82(0x200));_0x3dd790[_0x2a7e82(0x1c6)](_0x2db7e1=>{var _0x12ebe5=_0x2a7e82,_0x198c39=document[_0x12ebe5(0x1d4)](_0x12ebe5(0x1e7));_0x198c39[_0x12ebe5(0x1a7)](_0x12ebe5(0x204),_0x2db7e1),_0x198c39[_0x12ebe5(0x1a7)]('onclick',_0x12ebe5(0x1ff)),_0x198c39[_0x12ebe5(0x1ce)]=_0x12ebe5(0x1ec)+_0x2db7e1,_0x2db7e1==chatcookie&&_0x198c39['classList'][_0x12ebe5(0x1ae)]('currentChat'),_0x322b0e['appendChild'](_0x198c39);});}}else{let _0x3abd45=makeid(0x7);_0x3dd790=new URLSearchParams(window[_0x2a7e82(0x1dc)][_0x2a7e82(0x1d2)])['get'](_0x2a7e82(0x1f7)),setCookie('roomId',_0x3abd45=_0x3dd790&&0x4<_0x3dd790['length']?_0x3dd790:_0x3abd45,0x1e);let _0xf01412=[];_0xf01412[_0x2a7e82(0x1e5)](_0x3abd45),setCookie('chatList',_0xf01412=JSON[_0x2a7e82(0x1d3)](_0xf01412),0x1e),_0x3dd790=JSON['parse'](_0xf01412);let _0x36e63b=document['getElementById']('historyitem');_0x3dd790[_0x2a7e82(0x1c6)](_0xb6bc51=>{var _0x159267=_0x2a7e82,_0x178915=document[_0x159267(0x1d4)](_0x159267(0x1e7));_0x178915[_0x159267(0x1a7)](_0x159267(0x204),_0xb6bc51),_0x178915[_0x159267(0x1a7)](_0x159267(0x1c5),_0x159267(0x1ff)),_0x178915['innerText']=_0x159267(0x1ec)+_0xb6bc51,_0xb6bc51==chatcookie&&_0x178915[_0x159267(0x1ee)][_0x159267(0x1ae)](_0x159267(0x1f2)),_0x36e63b[_0x159267(0x1f5)](_0x178915);}),location['search']='?idchat='+_0x3abd45;}}startFirst();var toggle=!0x1;function toggleList(){var _0x21e211=_0x3e93;let _0x1620df=document[_0x21e211(0x1fe)](_0x21e211(0x1e3));var _0x422047=document[_0x21e211(0x1fe)](_0x21e211(0x1c3));!0x1===toggle?(_0x1620df[_0x21e211(0x1b5)]['opacity']='1',_0x1620df[_0x21e211(0x1b5)][_0x21e211(0x1e6)]=_0x21e211(0x1ba),_0x422047[_0x21e211(0x1b5)][_0x21e211(0x1d1)]=_0x21e211(0x1b1),_0x422047['style'][_0x21e211(0x1ab)]=_0x21e211(0x1a9),toggle=!0x0):(_0x422047[_0x21e211(0x1b5)][_0x21e211(0x1d1)]=_0x21e211(0x209),_0x422047[_0x21e211(0x1b5)][_0x21e211(0x1ab)]='#fff',_0x1620df[_0x21e211(0x1b5)]['opacity']='0',setTimeout(()=>{var _0x18f71d=_0x21e211;_0x1620df['style'][_0x18f71d(0x1e6)]=_0x18f71d(0x1b4),toggle=!0x1;},0x3e8));}async function newboxchat(){var _0x24b8e4=_0x3e93;Swal[_0x24b8e4(0x1e1)]({'title':'New\x20chats','input':_0x24b8e4(0x1de),'inputLabel':_0x24b8e4(0x1ca),'inputPlaceholder':_0x24b8e4(0x1b2),'inputAttributes':{'autocomplete':'off'},'showDenyButton':!0x0,'denyButtonText':'Xóa\x20đoạn\x20chat','showCancelButton':!0x0,'cancelButtonText':_0x24b8e4(0x1f3),'reverseButtons':!0x0,'inputValidator':_0xb66a60=>_0xb66a60?_0xb66a60[_0x24b8e4(0x1cb)](/\s/)?_0x24b8e4(0x1bf):_0xb66a60[_0x24b8e4(0x1e9)]<0x4?'Ðộ\x20ngắn\x20tối\x20thiểu\x20của\x20id\x20là\x204':0xa<_0xb66a60[_0x24b8e4(0x1e9)]?_0x24b8e4(0x1f0):void 0x0:_0x24b8e4(0x1dd)})[_0x24b8e4(0x1fc)](_0x491624=>{var _0x2c3148=_0x24b8e4,_0x159930;_0x491624['isConfirmed']?(setCookie(_0x2c3148(0x1ef),_0x491624[_0x2c3148(0x1d8)],0x1e),(_0x159930=JSON[_0x2c3148(0x1f6)](getCookie('chatList')))[_0x2c3148(0x1e5)](_0x491624['value']),setCookie(_0x2c3148(0x1fb),JSON[_0x2c3148(0x1d3)](_0x159930),0x1e),location['search']=_0x2c3148(0x1a8)+_0x491624['value']):_0x491624[_0x2c3148(0x1c4)]&&Swal[_0x2c3148(0x1e1)]({'icon':_0x2c3148(0x202),'title':_0x2c3148(0x1d9),'showCancelButton':!0x0,'cancelButtonText':_0x2c3148(0x1f3),'confirmButtonText':_0x2c3148(0x1d7)})[_0x2c3148(0x1fc)](_0x2298aa=>{var _0x11857b=_0x2c3148;_0x2298aa[_0x11857b(0x201)]&&deleteChat(chatcookie);});});}async function deleteChat(_0x22dd6d){var _0x2151ef=_0x3e93,_0x229a2d=JSON[_0x2151ef(0x1f6)](getCookie(_0x2151ef(0x1fb))),_0x1ec9b3=_0x229a2d['indexOf'](_0x22dd6d),_0x1ec9b3=(-0x1!==_0x1ec9b3&&_0x229a2d[_0x2151ef(0x1df)](_0x1ec9b3,0x1),JSON[_0x2151ef(0x1d3)](_0x229a2d));setCookie('chatList',_0x1ec9b3,0x1e),setCookie(_0x2151ef(0x1ef),'',-0x1),await fetch('https://paint-flower-danger.glitch.me/deletechat?filechat='+_0x22dd6d);}function gotoChat(_0x5bf2bb){var _0x203361=_0x3e93;_0x5bf2bb=_0x5bf2bb[_0x203361(0x1aa)](_0x203361(0x204)),(setCookie(_0x203361(0x1ef),_0x5bf2bb,0x1e),location[_0x203361(0x1d2)]=_0x203361(0x1a8)+_0x5bf2bb);}async function fetchMessages(){var _0x2bc38b=_0x3e93,_0x52c02d=await(await fetch(_0x2bc38b(0x1cc)+chatcookie))[_0x2bc38b(0x1c9)]();if(_0x52c02d[0x0]){const _0x5c5e49=document[_0x2bc38b(0x1fe)]('chat-box');_0x5c5e49['innerHTML']='',_0x52c02d[_0x2bc38b(0x1c6)](_0x166079=>{var _0x469579=_0x2bc38b,_0x212f46,_0x1274ac;void 0x0!==_0x166079[_0x469579(0x1da)]?(_0x212f46=_0x166079[_0x469579(0x1da)],changeTurns=_0x166079[_0x469579(0x1f8)],(_0x1274ac=document[_0x469579(0x1d4)](_0x469579(0x1e7)))[_0x469579(0x1ee)][_0x469579(0x1ae)](_0x469579(0x1fd)),_0x1274ac[_0x469579(0x1ce)]=_0x469579(0x205)+changeTurns+')-',_0x5c5e49['appendChild'](_0x1274ac),document[_0x469579(0x1da)]=_0x212f46,document[_0x469579(0x1fe)](_0x469579(0x1db))[_0x469579(0x1ce)]=_0x212f46):((_0x1274ac=document[_0x469579(0x1d4)](_0x469579(0x206)))[_0x469579(0x1ee)][_0x469579(0x1ae)]('chat-message'),_0x1274ac[_0x469579(0x1ee)]['add'](_0x166079[_0x469579(0x1b3)]===myMessage?_0x469579(0x1d6):'left'),_0x1274ac[_0x469579(0x1ce)]=_0x166079[_0x469579(0x1de)],_0x5c5e49[_0x469579(0x1f5)](_0x1274ac));}),_0x5c5e49['scrollTop']=_0x5c5e49[_0x2bc38b(0x1b8)];}}function _0x3e93(_0x47ab2c,_0x122a40){var _0x8cd76a=_0x8cd7();return _0x3e93=function(_0x3e933b,_0x1258e1){_0x3e933b=_0x3e933b-0x1a5;var _0x1a3b1d=_0x8cd76a[_0x3e933b];return _0x1a3b1d;},_0x3e93(_0x47ab2c,_0x122a40);}async function sendMessage(){var _0x504b18=_0x3e93,_0x2395d9,_0x51722f=document[_0x504b18(0x1fe)](_0x504b18(0x203));''!==_0x51722f[_0x504b18(0x1d8)][_0x504b18(0x1cf)]()&&(_0x2395d9=_0x51722f[_0x504b18(0x1d8)],_0x51722f[_0x504b18(0x1d8)]='',await fetch(_0x504b18(0x1a6),{'method':_0x504b18(0x1af),'headers':{'Content-Type':_0x504b18(0x1bd)},'body':JSON[_0x504b18(0x1d3)]({'room':chatcookie,'sender':myMessage,'text':_0x2395d9})}),fetchMessages());}function simpleAlert(_0x1feb6c,_0x3ce4bf=0x5){var _0xb4ccee=_0x3e93;let _0x5b3e1c=document['createElement'](_0xb4ccee(0x1e7)),_0x320634=document['querySelector']('.simple-alert');_0x5b3e1c[_0xb4ccee(0x1ee)][_0xb4ccee(0x1ae)]('alert-item'),_0x5b3e1c[_0xb4ccee(0x1ce)]=_0x1feb6c,_0x320634[_0xb4ccee(0x1f5)](_0x5b3e1c),setTimeout(()=>{var _0x5a6bf9=_0xb4ccee;_0x320634[_0x5a6bf9(0x1c0)](_0x5b3e1c);},0x3e8*_0x3ce4bf);}document['getElementById'](_0x2744a4(0x1c2))['addEventListener'](_0x2744a4(0x1bb),newboxchat),document[_0x2744a4(0x1fe)]('inputHeader')['addEventListener']('keyup',async _0x21a22b=>{var _0x5d44f9=_0x2744a4,_0xc7e507=document['getElementById'](_0x5d44f9(0x1eb));0xd==_0x21a22b[_0x5d44f9(0x1a5)]&&(_0x21a22b[_0x5d44f9(0x1c8)](),_0xc7e507[_0x5d44f9(0x1d8)]&&''!==_0xc7e507['value'][_0x5d44f9(0x1cf)]()?0x32<_0xc7e507[_0x5d44f9(0x1d8)]['length']?simpleAlert('Tiêu\x20đề\x20quá\x20dài',0x3):(_0xc7e507[_0x5d44f9(0x1b5)][_0x5d44f9(0x1c1)]=_0x5d44f9(0x209),_0x21a22b={'room':chatcookie,'title':_0xc7e507[_0x5d44f9(0x1d8)],'turns':changeTurns+0x1},await fetch('https://paint-flower-danger.glitch.me/messages',{'method':_0x5d44f9(0x1af),'headers':{'Content-Type':_0x5d44f9(0x1bd)},'body':JSON[_0x5d44f9(0x1d3)](_0x21a22b)})):_0xc7e507[_0x5d44f9(0x1b5)][_0x5d44f9(0x1c1)]=_0x5d44f9(0x209));}),document['getElementById'](_0x2744a4(0x203))[_0x2744a4(0x1bc)]('keyup',_0xf067b7=>{var _0x3cf413=_0x2744a4;0xd==_0xf067b7['keyCode']&&(_0xf067b7[_0x3cf413(0x1c8)](),document['getElementById'](_0x3cf413(0x1ad))[_0x3cf413(0x1bb)]());}),setInterval(fetchMessages,0x3e8),fetchMessages();
    </script>
</body>

</html>