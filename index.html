<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Simple real-time Chatbox</title>
    <style>
        .chat-box,.chat-container,.chat-head,.historyitem,.input-container,.message-headers,.simple-alert,body{display:flex;display:flex}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;justify-content:center;align-items:center;height:100vh;background-color:#f0f0f0;margin:0;overflow:hidden}.chat-container{max-width:350px;width:350px;border:1px solid #ccc;background-color:#fff;box-shadow:0 0 10px rgba(0,0,0,.1);border-radius:20px;overflow:hidden;flex-direction:column}.chat-head{height:25px;padding:15px;overflow-y:hidden;overflow-x:auto;border-bottom:2px solid #ccc;justify-content:center;align-items:center;background:linear-gradient(to bottom right,#9013fe,#4c5ef5);color:#fff}.chat-head input{position:absolute;height:25px;padding:5px 20px;font-size:16px;font-weight:800;outline:0;color:#fff;background-color:#fff;background:linear-gradient(to bottom right,#9013fe,#4c5ef5);border:1px solid #ccc;border-radius:15px 15px 0 0;display:none}.chat-head input::placeholder{color:#fff;opacity:.7}.chat-head button{color:#fff;background:0 0;outline:0;border:none}.chat-head .listchatBtn{position:absolute;right:8%;padding:10px;font-size:20px;color:#fff;background:0 0;border-radius:60px;outline:0;border:none}.chathistory{position:absolute;margin:310px 10px 0 140px;width:180px;height:240px;background:#f2f2f7;color:#000;border:1px solid #0000C44d;border-radius:20px 0 0 20px;padding:20px;z-index:2;overflow-x:hidden;overflow-y:scroll;transform:translate(300px);transition:.6s}.chathistory h5{position:absolute;top:-20px;left:66px}.historyitem{position:absolute;flex-direction:column}.historyitem span{justify-content:center;border-bottom:1px dashed #0000cc4d;border-top:1px dashed #0000cc4d;margin:3px 0;padding:8px}.historyitem .currentChat{background:linear-gradient(to bottom left,#ffea00,#d0ff00)}.historyitem span:hover{background:linear-gradient(to bottom left,#9013fe,#4c5ef5);color:#fff}.chat-head .newchatbtn{position:absolute;left:8%;padding:10px;font-size:20px;color:#fff;background:0 0;border-radius:60px;outline:0;border:none}.chat-box{flex:1;overflow-y:auto;overflow-x:hidden;min-height:60vh;max-height:60vh;padding:10px;border-bottom:1px solid #ccc;flex-direction:column}.chat-box .boxcontent{align-items:center;justify-content:center}.chat-message{margin:5px 0;padding:10px;border-radius:15px;color:#fff;max-width:75%}.message-headers{justify-content:center;font-style:italic;font-size:10px}.chat-message.left{background-color:#d1d1d1;color:#000;word-wrap:break-word;align-self:flex-start;border-radius:15px 15px 15px 0}.chat-message.right{color:#fff;word-wrap:break-word;background:linear-gradient(to bottom left,#9013fe,#4c5ef5);align-self:flex-end;border-radius:15px 15px 0}.input-container{border-top:1.5px solid #ccc}.input-container input{flex:1;padding:15px;border-radius:10%;border:none;outline:0}.input-container button{padding:10px;border:none;background-color:#4c5ef5;color:#fff;opacity:.9;cursor:pointer}.input-container button:hover{background-color:#4c5ef5;opacity:1}.simple-alert{position:absolute;flex-direction:column;top:0}.simple-alert span{color:#000;padding:8px 30px;background:#f2f2f7;border:1px solid #ccc;border-radius:15px;margin-bottom:5px}
    </style>
</head>

<body>
    <div class="simple-alert">
    </div>
    <div class="chat-container">
        <div class="chat-head">
            <input type="text" id="inputHeader" placeholder="Change the new title" autocomplete="off">
            <h3 id="chatHeader">Simple chatbox</h3>
            <button onclick="let iphd=document.getElementById('inputHeader'); iphd.style.display='block'; iphd.focus();"><i class="fa-regular fa-pen-to-square"></i></button>
            <button class="listchatBtn" id="listchatbtn" onclick="toggleList()"><i class="fa-solid fa-list"></i></button>
            <button class="newchatbtn" id="newchatbtn"><i class="fa-solid fa-circle-plus"></i></button>
            <div class="chathistory" id="chathistory">
                <h5>Lịch sử chat</h5>
                <div class="historyitem" id="historyitem">
                </div>
            </div>
        </div>

        <div class="chat-box" id="chat-box">
            <h4 style="position: absolute; margin: 180px 0 0 110px;">Đoạn chat mới</h4>
        </div>

        <div class="input-container">
            <input type="text" id="message-input" placeholder="Aa" autocomplete="off">
            <button id="sendmsgBtn" onclick="sendMessage()"><i class="fa-regular fa-paper-plane"></i></button>
        </div>
    </div>
    <script>
        var _0x790b63=_0x1df4;(function(_0x290745,_0x1bde84){var _0x220480=_0x1df4,_0x450458=_0x290745();while(!![]){try{var _0x226b55=parseInt(_0x220480(0x1e1))/0x1+-parseInt(_0x220480(0x1d9))/0x2*(-parseInt(_0x220480(0x1be))/0x3)+parseInt(_0x220480(0x203))/0x4*(-parseInt(_0x220480(0x1e9))/0x5)+-parseInt(_0x220480(0x205))/0x6+parseInt(_0x220480(0x206))/0x7+parseInt(_0x220480(0x1d4))/0x8+-parseInt(_0x220480(0x1e5))/0x9*(-parseInt(_0x220480(0x1c4))/0xa);if(_0x226b55===_0x1bde84)break;else _0x450458['push'](_0x450458['shift']());}catch(_0x3a96af){_0x450458['push'](_0x450458['shift']());}}}(_0x3853,0x2b0d6));function getCookie(_0x250f5c){var _0xeb5c44=_0x1df4,_0x407e95=_0x250f5c+'=',_0x466e12=decodeURIComponent(document[_0xeb5c44(0x1d7)])[_0xeb5c44(0x1ca)](';');for(let _0x5593d3=0x0;_0x5593d3<_0x466e12[_0xeb5c44(0x1f5)];_0x5593d3++){let _0x5e714a=_0x466e12[_0x5593d3];for(;'\x20'==_0x5e714a['charAt'](0x0);)_0x5e714a=_0x5e714a[_0xeb5c44(0x1b1)](0x1);if(0x0==_0x5e714a[_0xeb5c44(0x1bc)](_0x407e95))return _0x5e714a[_0xeb5c44(0x1b1)](_0x407e95[_0xeb5c44(0x1f5)],_0x5e714a[_0xeb5c44(0x1f5)]);}return'';}function setCookie(_0x2539d1,_0x10c6a7,_0x145c0b){var _0x42e44d=_0x1df4,_0x12328b=new Date(),_0x145c0b=(_0x12328b[_0x42e44d(0x1f2)](_0x12328b[_0x42e44d(0x1b3)]()+0x18*_0x145c0b*0x3c*0x3c*0x3e8),'expires='+_0x12328b[_0x42e44d(0x1d6)]());document['cookie']=_0x2539d1+'='+_0x10c6a7+';'+_0x145c0b+_0x42e44d(0x1bb);}function makeid(_0x2bef47){var _0x153791=_0x1df4;let _0x226a83='';var _0x9753b7='0123456789',_0x372a4b=_0x9753b7[_0x153791(0x1f5)];for(let _0x9a2b57=0x0;_0x9a2b57<_0x2bef47;_0x9a2b57++)_0x226a83+=_0x9753b7[_0x153791(0x1c5)](Math[_0x153791(0x1e8)](Math[_0x153791(0x1cc)]()*_0x372a4b));return _0x226a83;}function _0x1df4(_0x595607,_0x7f67f2){var _0x38532d=_0x3853();return _0x1df4=function(_0x1df45d,_0x1fd252){_0x1df45d=_0x1df45d-0x1ad;var _0x362071=_0x38532d[_0x1df45d];return _0x362071;},_0x1df4(_0x595607,_0x7f67f2);}function _0x3853(){var _0x4a9ab8=['message-input','inputHeader','chathistory','4pklAVq','idchat','2077044baZSvp','1634612bKMbri','listchatbtn','isConfirmed','translate(0)','roomId','json','Tạo\x20đoạn\x20chat\x20mới\x20hoặc\x20đi\x20tới\x20đoạn\x20chat\x20với\x20id','chat-box','mytext','gotoChat(this)','newchatbtn','Xóa','New\x20chats','chatList','right','Độ\x20dài\x20tối\x20đa\x20của\x20id\x20là\x2010','scrollTop','opacity','onclick','#fff','background','value','https://paint-flower-danger.glitch.me/deletechat?filechat=','span','substring','POST','getTime','getElementById','alert-item','push','https://paint-flower-danger.glitch.me/messages','isDenied','search','-Đã\x20cập\x20nhật\x20tiêu\x20đề\x20(',';path=/','indexOf','keyCode','309ABwbBV','innerHTML','application/json','title','message-headers','Hãy\x20nhập\x20một\x20id\x20bất\x20kỳ!','8440iSWJJq','charAt','preventDefault','Ðộ\x20ngắn\x20tối\x20thiểu\x20của\x20id\x20là\x204','then','Xóa\x20đoạn\x20chat','split','.simple-alert','random','trim','match','sendmsgBtn','style','historyitem','chat-message','removeChild','267568tGIAnH','data-chat','toUTCString','cookie','Nhập\x20id\x20đoạn\x20chat','778iWPRkb','?idchat=','click','stringify','forEach','#000','Thao\x20tác\x20này\x20sẽ\x20chỉ\x20xóa\x20đoạn\x20chat\x20hiện\x20tại','Tiêu\x20đề\x20quá\x20dài','279220PqIaEJ','addEventListener','createElement','getAttribute','9MNByYI','transform','#f2f2f7','floor','322885LJrmXy','translate(300px)','fire','setAttribute','display','appendChild','currentChat','https://paint-flower-danger.glitch.me/messages?room=','innerText','setTime','classList','off','length','add','keyup','left','text','Chỉ\x20chấp\x20nhận\x20id\x20bằng\x20số','Đoạn\x20chat:\x20','parse','none','div','get'];_0x3853=function(){return _0x4a9ab8;};return _0x3853();}var myMessage=getCookie(_0x790b63(0x20e)),chatcookie=getCookie(_0x790b63(0x20a)),changeTurns=0x0;function startFirst(){var _0x16aa5b=_0x790b63;if(myMessage||setCookie(_0x16aa5b(0x20e),makeid(0x7),0x1e),chatcookie){var _0x3c95ec=getCookie(_0x16aa5b(0x213));if(_0x3c95ec){_0x3c95ec=JSON[_0x16aa5b(0x1fc)](_0x3c95ec);let _0x266d8c=document[_0x16aa5b(0x1b4)]('historyitem');_0x3c95ec[_0x16aa5b(0x1dd)](_0x2211dc=>{var _0x326ffc=_0x16aa5b,_0x31546c=document[_0x326ffc(0x1e3)]('span');_0x31546c[_0x326ffc(0x1ec)](_0x326ffc(0x1d5),_0x2211dc),_0x31546c[_0x326ffc(0x1ec)](_0x326ffc(0x218),_0x326ffc(0x20f)),_0x31546c[_0x326ffc(0x1f1)]=_0x326ffc(0x1fb)+_0x2211dc,_0x2211dc==chatcookie&&_0x31546c[_0x326ffc(0x1f3)][_0x326ffc(0x1f6)](_0x326ffc(0x1ef)),_0x266d8c['appendChild'](_0x31546c);});}}else{let _0x4c7f4a=makeid(0x7);_0x3c95ec=new URLSearchParams(window['location'][_0x16aa5b(0x1b9)])[_0x16aa5b(0x1ff)](_0x16aa5b(0x204)),setCookie(_0x16aa5b(0x20a),_0x4c7f4a=_0x3c95ec&&0x4<_0x3c95ec[_0x16aa5b(0x1f5)]?_0x3c95ec:_0x4c7f4a,0x1e);let _0xb39749=[];_0xb39749[_0x16aa5b(0x1b6)](_0x4c7f4a),setCookie(_0x16aa5b(0x213),_0xb39749=JSON[_0x16aa5b(0x1dc)](_0xb39749),0x1e),_0x3c95ec=JSON[_0x16aa5b(0x1fc)](_0xb39749);let _0x4987d7=document[_0x16aa5b(0x1b4)](_0x16aa5b(0x1d1));_0x3c95ec[_0x16aa5b(0x1dd)](_0x56a1b7=>{var _0x5f1b1b=_0x16aa5b,_0x182967=document['createElement']('span');_0x182967[_0x5f1b1b(0x1ec)]('data-chat',_0x56a1b7),_0x182967[_0x5f1b1b(0x1ec)](_0x5f1b1b(0x218),'gotoChat(this)'),_0x182967[_0x5f1b1b(0x1f1)]='Đoạn\x20chat:\x20'+_0x56a1b7,_0x56a1b7==chatcookie&&_0x182967[_0x5f1b1b(0x1f3)][_0x5f1b1b(0x1f6)]('currentChat'),_0x4987d7['appendChild'](_0x182967);}),location['search']=_0x16aa5b(0x1da)+_0x4c7f4a;}}startFirst();var toggle=!0x1;function toggleList(){var _0x3de32d=_0x790b63;let _0x4ccb5e=document[_0x3de32d(0x1b4)](_0x3de32d(0x202));var _0x8fc675=document[_0x3de32d(0x1b4)](_0x3de32d(0x207));!0x1===toggle?(_0x4ccb5e['style'][_0x3de32d(0x217)]='1',_0x4ccb5e[_0x3de32d(0x1d0)]['transform']=_0x3de32d(0x209),_0x8fc675[_0x3de32d(0x1d0)][_0x3de32d(0x1ad)]=_0x3de32d(0x1e7),_0x8fc675[_0x3de32d(0x1d0)]['color']=_0x3de32d(0x1de),toggle=!0x0):(_0x8fc675['style'][_0x3de32d(0x1ad)]=_0x3de32d(0x1fd),_0x8fc675[_0x3de32d(0x1d0)]['color']=_0x3de32d(0x219),_0x4ccb5e[_0x3de32d(0x1d0)]['opacity']='0',setTimeout(()=>{var _0x1548b4=_0x3de32d;_0x4ccb5e[_0x1548b4(0x1d0)][_0x1548b4(0x1e6)]=_0x1548b4(0x1ea),toggle=!0x1;},0x3e8));}async function newboxchat(){var _0x270a86=_0x790b63;Swal[_0x270a86(0x1eb)]({'title':_0x270a86(0x212),'input':_0x270a86(0x1f9),'inputLabel':_0x270a86(0x20c),'inputPlaceholder':_0x270a86(0x1d8),'inputAttributes':{'autocomplete':_0x270a86(0x1f4)},'showDenyButton':!0x0,'denyButtonText':_0x270a86(0x1c9),'showCancelButton':!0x0,'cancelButtonText':'Hủy','reverseButtons':!0x0,'inputValidator':_0x57c1ee=>_0x57c1ee?_0x57c1ee[_0x270a86(0x1ce)](/^\d+$/)?_0x57c1ee[_0x270a86(0x1f5)]<0x4?_0x270a86(0x1c7):0xa<_0x57c1ee[_0x270a86(0x1f5)]?_0x270a86(0x215):void 0x0:_0x270a86(0x1fa):_0x270a86(0x1c3)})[_0x270a86(0x1c8)](_0x411aae=>{var _0xe5e048=_0x270a86,_0x56fb29;_0x411aae[_0xe5e048(0x208)]?(setCookie('roomId',_0x411aae[_0xe5e048(0x1ae)],0x1e),(_0x56fb29=JSON[_0xe5e048(0x1fc)](getCookie(_0xe5e048(0x213))))['push'](_0x411aae[_0xe5e048(0x1ae)]),setCookie('chatList',JSON['stringify'](_0x56fb29),0x1e),location[_0xe5e048(0x1b9)]=_0xe5e048(0x1da)+_0x411aae[_0xe5e048(0x1ae)]):_0x411aae[_0xe5e048(0x1b8)]&&Swal['fire']({'icon':'warning','title':_0xe5e048(0x1df),'showCancelButton':!0x0,'cancelButtonText':'Hủy','confirmButtonText':_0xe5e048(0x211)})[_0xe5e048(0x1c8)](_0x3ef950=>{var _0x2d1992=_0xe5e048;_0x3ef950[_0x2d1992(0x208)]&&deleteChat(chatcookie);});});}async function deleteChat(_0x173956){var _0xc83603=_0x790b63;let _0x46384b=JSON[_0xc83603(0x1fc)](getCookie(_0xc83603(0x213)));_0x46384b[_0xc83603(0x1b6)](chatcookie),setCookie(_0xc83603(0x213),_0x46384b=JSON['stringify'](_0x46384b),0x1e),setCookie('roomId','',-0x1),await fetch(_0xc83603(0x1af)+_0x173956);}function gotoChat(_0xc26500){var _0x371f26=_0x790b63;_0xc26500=_0xc26500[_0x371f26(0x1e4)](_0x371f26(0x1d5)),(setCookie('roomId',_0xc26500,0x1e),location[_0x371f26(0x1b9)]=_0x371f26(0x1da)+_0xc26500);}async function fetchMessages(){var _0x3b1ee7=_0x790b63,_0x562352=await(await fetch(_0x3b1ee7(0x1f0)+chatcookie))[_0x3b1ee7(0x20b)]();if(_0x562352[0x0]){const _0x4efd56=document[_0x3b1ee7(0x1b4)](_0x3b1ee7(0x20d));_0x4efd56[_0x3b1ee7(0x1bf)]='',_0x562352['forEach'](_0x424aa6=>{var _0x375af0=_0x3b1ee7,_0xd7eb0f,_0x4067d7;void 0x0!==_0x424aa6[_0x375af0(0x1c1)]?(_0xd7eb0f=_0x424aa6['title'],changeTurns=_0x424aa6['turns'],(_0x4067d7=document['createElement'](_0x375af0(0x1b0)))[_0x375af0(0x1f3)][_0x375af0(0x1f6)](_0x375af0(0x1c2)),_0x4067d7[_0x375af0(0x1f1)]=_0x375af0(0x1ba)+changeTurns+')-',_0x4efd56[_0x375af0(0x1ee)](_0x4067d7),document[_0x375af0(0x1c1)]=_0xd7eb0f,document[_0x375af0(0x1b4)]('chatHeader')['innerText']=_0xd7eb0f):((_0x4067d7=document[_0x375af0(0x1e3)](_0x375af0(0x1fe)))[_0x375af0(0x1f3)]['add'](_0x375af0(0x1d2)),_0x4067d7[_0x375af0(0x1f3)][_0x375af0(0x1f6)](_0x424aa6['sender']===myMessage?_0x375af0(0x214):_0x375af0(0x1f8)),_0x4067d7[_0x375af0(0x1f1)]=_0x424aa6[_0x375af0(0x1f9)],_0x4efd56[_0x375af0(0x1ee)](_0x4067d7));}),_0x4efd56[_0x3b1ee7(0x216)]=_0x4efd56['scrollHeight'];}}async function sendMessage(){var _0x4dee74=_0x790b63,_0x373ac7,_0x280ff3=document[_0x4dee74(0x1b4)](_0x4dee74(0x200));''!==_0x280ff3[_0x4dee74(0x1ae)]['trim']()&&(_0x373ac7=_0x280ff3[_0x4dee74(0x1ae)],_0x280ff3[_0x4dee74(0x1ae)]='',await fetch(_0x4dee74(0x1b7),{'method':_0x4dee74(0x1b2),'headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'room':chatcookie,'sender':myMessage,'text':_0x373ac7})}),fetchMessages());}function simpleAlert(_0x2baec4,_0x229a87=0x5){var _0x43f3e1=_0x790b63;let _0x56b897=document[_0x43f3e1(0x1e3)](_0x43f3e1(0x1b0)),_0x3b4ad1=document['querySelector'](_0x43f3e1(0x1cb));_0x56b897[_0x43f3e1(0x1f3)][_0x43f3e1(0x1f6)](_0x43f3e1(0x1b5)),_0x56b897['innerText']=_0x2baec4,_0x3b4ad1[_0x43f3e1(0x1ee)](_0x56b897),setTimeout(()=>{var _0x5aa5cd=_0x43f3e1;_0x3b4ad1[_0x5aa5cd(0x1d3)](_0x56b897);},0x3e8*_0x229a87);}document['getElementById'](_0x790b63(0x210))[_0x790b63(0x1e2)](_0x790b63(0x1db),newboxchat),document[_0x790b63(0x1b4)](_0x790b63(0x201))[_0x790b63(0x1e2)](_0x790b63(0x1f7),async _0x40523f=>{var _0x3cf2fd=_0x790b63,_0x177d47=document[_0x3cf2fd(0x1b4)](_0x3cf2fd(0x201));0xd==_0x40523f[_0x3cf2fd(0x1bd)]&&(_0x40523f[_0x3cf2fd(0x1c6)](),_0x177d47[_0x3cf2fd(0x1ae)]&&''!==_0x177d47[_0x3cf2fd(0x1ae)][_0x3cf2fd(0x1cd)]()?0x32<_0x177d47[_0x3cf2fd(0x1ae)][_0x3cf2fd(0x1f5)]?simpleAlert(_0x3cf2fd(0x1e0),0x3):(_0x177d47[_0x3cf2fd(0x1d0)][_0x3cf2fd(0x1ed)]=_0x3cf2fd(0x1fd),_0x40523f={'room':chatcookie,'title':_0x177d47['value'],'turns':changeTurns+0x1},await fetch(_0x3cf2fd(0x1b7),{'method':_0x3cf2fd(0x1b2),'headers':{'Content-Type':_0x3cf2fd(0x1c0)},'body':JSON[_0x3cf2fd(0x1dc)](_0x40523f)})):_0x177d47['style']['display']=_0x3cf2fd(0x1fd));}),document['getElementById'](_0x790b63(0x200))[_0x790b63(0x1e2)](_0x790b63(0x1f7),_0x32b434=>{var _0x2cfefd=_0x790b63;0xd==_0x32b434[_0x2cfefd(0x1bd)]&&(_0x32b434[_0x2cfefd(0x1c6)](),document[_0x2cfefd(0x1b4)](_0x2cfefd(0x1cf))['click']());}),setInterval(fetchMessages,0x3e8),fetchMessages();
    </script>
</body>

</html>